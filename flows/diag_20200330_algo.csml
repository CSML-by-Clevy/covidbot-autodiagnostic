start:
	// CALCUL IMC
	do sizem = size.to_float() / 100
	do sizem2 = sizem.pow(2)
	remember imc = weight.to_float() / sizem2

	// Facteurs de gravitÃ© mineurs
	do fgmineurs = 0
	if (temp >= 39) do fgmineurs = fgmineurs + 1
	if (temp <= 35.4 && temp > 0) do fgmineurs = fgmineurs + 1
	if (hasDailyNap == 1) do fgmineurs = fgmineurs + 1

	// Facteurs de gravitÃ© majeurs
	do fgmajeurs = 0
	if (hasSOB == 1) do fgmajeurs = fgmajeurs + 1
	if (hasFeedStruggle == 1) do fgmajeurs = fgmajeurs + 1

	do hasNoPronosticFactors = (imc <= 30 &&
		hasCARDISSUE == 0 &&
		hasDiabetes == 0 &&
		hasCancer == 0 &&
		hasBreathingIllness == 0 &&
		hasKidneyFailure == 0 &&
		hasLiverIllness == 0 &&
		isPregnant != 1 &&
		hasImuneSystemFailure != 1 &&
		hasImmunosuppresseur != 1)

//////////////////////////////////////////////////////////////
// CALCULS DES NIVEAUX DE SYMPTOMES //////////////////////////
//////////////////////////////////////////////////////////////

	// Patients avec aucun symptome
	if ((hasTemp == 0 || temp == 0 || (temp >= 35.5 && temp <= 37.7)) &&
		hasCaugh == 0 &&
		hasPainfulThroatMuscle == 0 &&
		hasDiarrhea == 0 &&
		hasFatigue == 0 &&
		hasFeedStruggle == 0 &&
		hasSOB == 0
	) do symptomsLevel = 0

	// Tout patient sans fieÌ€vre avec un seul symptoÌ‚me parmi toux, douleurs, anosmie
	if (hasCaugh + hasPainfulThroatMuscle + hasNoTaste == 1 && temp >= 35.5 && temp <= 37.7) {
		do symptomsLevel = 1
	}

	// Tout patient avec
	// - fieÌ€vre
	// - ou sans fieÌ€vre et avec
	// ---- diarrheÌe
	// ---- ou toux et douleurs
	// ---- ou toux et anosmie
	if (temp > 37.7 ||
		(hasCaugh == 1 && hasPainfulThroatMuscle == 1) ||
		(hasCaugh == 1 && hasNoTaste == 1) ||
		(hasDiarrhea == 1)
	) do symptomsLevel = 2

	// Tout patient avec fieÌ€vre et toux :
	if (temp > 37.7 && hasCaugh == 1) do symptomsLevel = 3



//////////////////////////////////////////////////////////////
// CALCULS CAS UNIQUES ///////////////////////////////////////
// SELON SYMPTOMES & FACTEURS GRAVITÃ‰ ////////////////////////
//////////////////////////////////////////////////////////////

	if (age < 15) {
		say "Prenez contact avec votre meÌdecin geÌneÌraliste au moindre doute ğŸ‘¨â€âš•ï¸ğŸ‘©â€âš•ï¸. Cette application nâ€™est pour lâ€™instant pas adapteÌe aux personnes de moins de 15 ans. En cas dâ€™urgence, *appelez le 15* ğŸ“."
		goto end
	}

	// Tout patient avec au moins un facteur de graviteÌ majeur
	if (fgmajeurs > 0) {
		say " ğŸš¨ *Appelez le 15, car vos symptÃ´mes ou antÃ©cÃ©dents nÃ©cessitent un avis rapide*."
		say Typing(2000)
		say "Les SAMU-centres 15 disposent des derniÃ¨res procÃ©dures en vigueur dans votre zone gÃ©ographique."
		say Typing(2000)
		say " *Composez le 15*. Une prise en charge adaptÃ©e Ã  votre rÃ©gion et Ã  votre Ã©tat de santÃ© vous sera proposÃ©e. Restez en ligne, le dÃ©lai d'attente peut Ãªtre exceptionnellement long."
		goto final

	}

	if (symptomsLevel == 0) {
		say "*Votre situation ne releÌ€ve probablement pas du Covid-19* âœ… . Nâ€™heÌsitez pas aÌ€ contacter votre meÌdecin ğŸ‘¨â€âš•ï¸ en cas de doute. Vous pouvez refaire le test en cas de nouveau symptoÌ‚me pour reÌeÌvaluer la situation ğŸ‘¨â€âš•ï¸. "
		goto final
	}

	if (symptomsLevel == 1) {
		// Au moins un facteur pronostique
		if (hasNoPronosticFactors == false) {
			say "âš ï¸ *Votre situation peut relever dâ€™un COVID 19.*"
			say Typing(2000)
			say "Un avis meÌdical est recommandeÌ."
			say Typing(2000)
			say "Au moindre doute, appelez le 15. Nous vous conseillons de rester aÌ€ votre domicile."
 
			goto final
		} else {
			say "Votre situation peut relever dâ€™un COVID 19 quâ€™il faut surveiller."
			say Typing(2000)
			say "Si de nouveaux symptoÌ‚mes apparaissent, refaites le test ou consultez votre meÌdecin. Nous vous conseillons de rester aÌ€ votre domicile."
			goto final
		}
	}

	if (symptomsLevel == 3) {
		// Tout patient sans facteur pronostique
		if (hasNoPronosticFactors == true) {
			say "âš ï¸ *Votre situation peut relever dâ€™un COVID 19.*"
			say Typing(2000)
			say "Demandez une teÌleÌconsultation ou un meÌdecin geÌneÌraliste ou une visite aÌ€ domicile (SOS meÌdecins, etc.)."
			say Url("https://maladiecoronavirus.fr/teleconsultation",
				text="Services de TÃ©lÃ©consultation")
			say Url("https://maladiecoronavirus.fr/permanences",
				text="Permanences de soins ambulatoires par rÃ©gion (PDSA)")
			goto final
		}
		// Tout patient avec un facteur pronostique ou plus
		if (hasNoPronosticFactors == false) {
			// Si un ou deux facteurs de graviteÌ mineurs
			if (fgmineurs <= 1) {
				say "âš ï¸ *Votre situation peut relever dâ€™un COVID 19.*"
				say Typing(2000)
				say "Demandez une teÌleÌconsultation ou un meÌdecin geÌneÌraliste ou une visite aÌ€ domicile (SOS meÌdecins, etc.)."
				say Url("https://maladiecoronavirus.fr/teleconsultation",
					text="Services de TÃ©lÃ©consultation")
				say Url("https://maladiecoronavirus.fr/permanences",
					text="Permanences de soins ambulatoires par rÃ©gion (PDSA)")
				goto final
			}
			// Avec au moins deux facteurs de graviteÌ mineurs
			if (fgmineurs > 1) {
				say "*âš ï¸Votre situation peut relever dâ€™un COVID 19 et nÃ©cessite un avis mÃ©dical*"
				say Typing(2000)
				say "*Ne vous dÃ©placez pas au cabinet*, appelez pour demander conseil avant votre venue."
				say Typing(2000)
				say "Pour rechercher un avis mÃ©dical ğŸ‘©â€âš•ï¸ğŸ‘¨â€âš•ï¸, vous pouvez aussi utiliser un *service de tÃ©lÃ©consultation*. Alternativement, nous avons essayÃ© de rÃ©unir les contacts des permanences de soins ambulatoires de votre rÃ©gion."
				say Url("https://maladiecoronavirus.fr/teleconsultation",
					text="Services de TÃ©lÃ©consultation")
				say Url("https://maladiecoronavirus.fr/permanences",
					text="Permanences de soins ambulatoires par rÃ©gion (PDSA)")
				say Typing(2000)
				say "ğŸ“ Appelez le *15* si une geÌ‚ne respiratoire ou des difficulteÌs importantes pour sâ€™alimenter ou boire pendant plus de 24h apparaissent."
				goto final
			}
		}
	}
	if (symptomsLevel == 2) {
		// Tout patient sans facteur pronostique
		if (hasNoPronosticFactors == true) {
			// Si pas de facteur de graviteÌ mineur
			if (fgmineurs == 0) {
				// Si moins de 50 ans
				if (age < 50) {
					say "*Votre situation peut relever dâ€™un COVID 19 quâ€™il faut surveiller.*"
          say Typing(2000)
					say "Si de nouveaux symptoÌ‚mes apparaissent, *refaites le test ou consultez votre meÌdecin*. Nous vous conseillons de rester aÌ€ votre domicile."
				} else {
					say "âš ï¸ *Votre situation peut relever dâ€™un COVID 19.*"
					say Typing(2000)
          say "Demandez une *teÌleÌconsultation ou un meÌdecin geÌneÌraliste ou une visite aÌ€ domicile. ğŸ‘¨â€âš•ï¸ğŸ‘©â€âš•ï¸*"
					say Typing(2000)
          say "ğŸ“ *Appelez le 15* si une geÌ‚ne respiratoire ou des difficulteÌs importantes pour vous alimenter ou boire apparaissent pendant plus de 24 heures."
				}
			}
			// Sinon (1 ou plusieurs facteurs de graviteÌ mineurs)
			else if (fgmineurs >= 1) {
					say "âš ï¸ *Votre situation peut relever dâ€™un COVID 19.*"
					say Typing(2000)
          say "Demandez une *teÌleÌconsultation ou un meÌdecin geÌneÌraliste ou une visite aÌ€ domicile. ğŸ‘¨â€âš•ï¸ğŸ‘©â€âš•ï¸*"
					say Typing(2000)
          say "ğŸ“ *Appelez le 15* si une geÌ‚ne respiratoire ou des difficulteÌs importantes pour vous alimenter ou boire apparaissent pendant plus de 24 heures."
				}
		}
		// Tout patient avec un facteur pronostique ou plus
		if (hasNoPronosticFactors == false) {
			// Si zeÌro ou un facteur de graviteÌ mineur
			if (fgmineurs == 0) {
				say "âš ï¸ *Votre situation peut relever dâ€™un COVID 19.*"
				say Typing(2000)
				say "Demandez une teÌleÌconsultation ou un meÌdecin geÌneÌraliste ou une visite aÌ€ domicile."
				say Url("https://maladiecoronavirus.fr/teleconsultation",
					text="Services de TÃ©lÃ©consultation")
				say Url("https://maladiecoronavirus.fr/permanences",
					text="Permanences de soins ambulatoires par rÃ©gion (PDSA)")
				say Typing(2000)
				say "ğŸ“ *Appelez le 15* si une geÌ‚ne respiratoire ou des difficulteÌs importantes pour sâ€™alimenter ou boire pendant plus de 24h apparaissent."
				goto final
			}
			// Au moins deux facteurs de graviteÌ mineurs
			if (fgmineurs >= 2) {
				say "âš ï¸ *Votre situation peut relever dâ€™un COVID 19.*"
				say Typing(2000)
				say "Demandez une teÌleÌconsultation ou un meÌdecin geÌneÌraliste ou une visite aÌ€ domicile."
				say Typing(2000)
				say "Si vous n'arrivez pas aÌ€ obtenir de consultation, appelez le 15."
				goto final
			}
		}
	}
	//Cette phrase est appelÃ©e lorsque le cas n'est pas couvert par l'algorithme
	say "Malheureusement, *nous n'avons pas assez de donnÃ©e pour vous rÃ©aliser un autodiagnostic*. Prenez contact avec votre meÌdecin geÌneÌraliste au moindre doute ğŸ‘¨â€âš•ï¸ğŸ‘©â€âš•ï¸. En cas dâ€™urgence, appeler le 15. ğŸ“"
	goto final

final:
	//say "Restez chez vous au maximum en attendant que les symptoÌ‚mes disparaissent. Prenez votre tempeÌrature deux fois par jour. Rappel des mesures dâ€™hygieÌ€ne."
  say Typing(2000)
  say "Pour vous protÃ©ger et protÃ©ger les autres, dans la mesure du possible, *restez chez vous* et *limitez les contacts avec d'autres personnes.*"
  say Typing(2000)
  say Url("https://covid19-medicaments.com",
    text="Pour vÃ©rifier si un mÃ©dicament pourrait prÃ©senter un risque potentiel d'aggraver vos symptÃ´mes")
  say Url("https://www.gouvernement.fr/info-coronavirus",
    text="Vous avez des questions additionnelles, appelez le 0800 130 000, ou suivez l'actualitÃ© sur : ")

	goto end
